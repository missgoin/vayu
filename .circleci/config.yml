version: 2.1
jobs:
  compile:
   docker:
      - image: ubuntu:jammy-20211029
   steps:
      - run:
          command: |
            apt update && apt upgrade -y
            apt install -f -y git
            ln -fs /usr/share/zoneinfo/Asia/Jakarta /etc/localtime && date
            git clone --depth=1 https://github.com/missgoin/vayu.git -b main builder_kernel
            cd builder_kernel
            cp -af sources.list /etc/apt/
            cp -af 99own /etc/apt/apt.conf.d/
            apt install -y bc binutils-dev bison build-essential ca-certificates ccache clang cmake curl file flex libelf-dev libssl-dev lld make ninja-build python3-dev texinfo u-boot-tools xz-utils zlib1g-dev
            bash .circleci/vayu.sh
workflows:
  version: 2.1
  cooking:
    jobs:
      - compile
